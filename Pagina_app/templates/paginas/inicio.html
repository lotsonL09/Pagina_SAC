{%extends 'graficos.html' %}
{% load static %}

{% block head %}

    <script src="{% static '/highchart/highcharts.js' %}"></script>
    <script src="{% static '/highchart/modules/series-label.js' %}"></script>
    <script src="{% static '/highchart/modules/exporting.js' %}"></script>
    <script src="{% static '/highchart/modules/export-data.js' %}"></script>
    <script src="{% static '/highchart/modules/accessibility.js' %}"></script>
    <script src="{% static '/highchart/modules/data.js' %}"></script>

{% endblock %}

{% block grafico_1_T %} 

    <div class="container">
        <div class="row">
            <div class="col">
                <div id="container"></div>
            </div>
        </div>
    </div>
    <script type="application/javascript">
        Highcharts.chart('container', {
        title: {
            text: 'Temperatura'
        },

        subtitle: {
            text: 'LUGAR DE MEDICIÃ“N'
        },

        yAxis: {
            title: {
                text: 'EJE Y'
            }
        },

        xAxis: {
            title: {text: 'Eje X'}
        },

        legend: {
            layout: 'vertical',
            align: 'right',
            verticalAlign: 'middle'
        },

        plotOptions: {
            series: {
                label: {
                    connectorAllowed: false
                },
                pointStart: 2010
            }
        },

        series: [{
            // name: 'Installation',
            data: [43934, 52503, 57177, 69658, 97031, 119931, 137133, 154175]
        }],

        responsive: {
            rules: [{
                condition: {
                    maxWidth: 500
                },
                chartOptions: {
                    legend: {
                        layout: 'horizontal',
                        align: 'center',
                        verticalAlign: 'bottom'
                    }
                }
            }]
        }

        });
        
    </script>
{% endblock %}

{% block grafico_2_T %} 
    <div class="container">
        <div class="row">
            <div class="col">
                <div id="container-live"></div>
            </div>
        </div>
    </div>

    
    <div class="ld-row">
        <label class="ld-label">
            Enable Polling
        </label>
        <input type="checkbox" checked="checked" id="enablePolling"/>
        </div>
        <div class="ld-row">
            <label class="ld-label">
                Polling Time (Seconds)
            </label>
            <input class="ld-time-input" type="number" value="2" id="pollingTime"/>
        </div>
        <div class="ld-row">
            <label class="ld-label">
                CSV URL
            </label>
            <input class="ld-url-input" type="text" id="fetchURL"/>
        </div>


    <script type="application/javascript">
        var defaultData = 'https://demo-live-data.highcharts.com/time-data.csv';
        var urlInput = document.getElementById('fetchURL');
        var pollingCheckbox = document.getElementById('enablePolling');
        var pollingInput = document.getElementById('pollingTime');

        function createChart() {
            Highcharts.chart('container-live', {
                chart: {
                    type: 'spline'
                },
                title: {
                    text: 'Live Data'
                },
                accessibility: {
                    announceNewData: {
                        enabled: true,
                        minAnnounceInterval: 15000,
                        announcementFormatter: function (allSeries, newSeries, newPoint) {
                            if (newPoint) {
                                return 'New point added. Value: ' + newPoint.y;
                            }
                            return false;
                        }
                    }
                },
                data: {
                    csvURL: urlInput.value,
                    enablePolling: pollingCheckbox.checked === true,
                    dataRefreshRate: parseInt(pollingInput.value, 10)
                }
            });

            if (pollingInput.value < 1 || !pollingInput.value) {
                pollingInput.value = 1;
            }
        }

        urlInput.value = defaultData;

        // We recreate instead of using chart update to make sure the loaded CSV
        // and such is completely gone.
        pollingCheckbox.onchange = urlInput.onchange = pollingInput.onchange = createChart;

        // Create the chart
        createChart();

    </script>
{% endblock %}